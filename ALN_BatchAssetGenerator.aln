# File: ALN_BatchAssetGenerator.aln
run "generate_assets" {
  input: "registry/assets.yml"
  output: "data/ledger/placements.ndjson"
  seed: "session:${now}"
  steps:
    - load_catalog("registry/assets.yml")
    - for_each(asset) {
        place(asset.asset_id)
          .with_seed(deterministic(asset.asset_id, session))
          .with_context(biome: "temperate", time_of_day: "dusk", visibility_budget_ms: 200)
          .approve("wod.asset.place.v1")
          .log("logs/placements/${asset.asset_id}.log")
      }
}
